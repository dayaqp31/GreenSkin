<!DOCTYPE html>
<html lang="es-CR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>GreenSkin | Perfumes y Skin Care Coreano en Costa Rica</title>
  <meta name="description" content="GreenSkin: Perfumes Bath & Body Works (â‚¡15.900) y Skin Care Coreano (Skin1004, Mixsoon, Aqua, Anua). EnvÃ­os por Correos de Costa Rica y entregas en la GAM por Uber Flash. Pago por transferencia o SINPE MÃ³vil." />
  <meta property="og:title" content="GreenSkin | Perfumes y Skin Care Coreano en Costa Rica" />
  <meta property="og:description" content="Perfumes originales y cosmÃ©tica coreana. EnvÃ­os a todo Costa Rica y entregas en la GAM. Paga por transferencia o SINPE MÃ³vil." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="es_CR" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    :root{
      --ink:#0b0b0f; --bg:#ffffff; --muted:#6b7280; --accent:#1f8f5f; --accent-2:#e9f7ef; --border:#e5e7eb;
      --radius:18px; --shadow:0 12px 32px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button,input,textarea{font:inherit}

    /* Fondo blanco con detalles de naturaleza */
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; opacity:.18;
      background:
        radial-gradient(1200px 600px at -10% 10%, #d1fae5 0, transparent 60%),
        radial-gradient(900px 500px at 110% 80%, #bbf7d0 0, transparent 60%),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="600" viewBox="0 0 200 200" fill="none" opacity="0.06"><g fill="%231f8f5f"><path d="M60 120c20 30 60 40 80 0-30 10-50-10-80 0z"/><circle cx="30" cy="40" r="6"/><circle cx="160" cy="160" r="5"/><path d="M26 110c18 8 30 24 42 42-22-6-35-20-42-42z"/></g></svg>');
      background-repeat:no-repeat; background-size:cover, cover, 600px; background-position:center;
    }

    /* Topbar + Header */
    .topbar{display:flex;gap:8px;align-items:center;justify-content:center;padding:8px 16px;background:var(--accent-2);color:#065f46;font-weight:600}
    header{position:sticky;top:0;z-index:40;background:#fff;border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;max-width:1200px;margin:0 auto}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.5px;min-width:0}
    .brand img{height:46px}
    .menu{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .menu a{padding:8px 12px;border-radius:999px}
    .menu a.active, .menu a:hover{background:#f3f4f6}
    .item{position:relative}
    .item> a{display:inline-flex;align-items:center;gap:6px}
    .submenu{position:absolute;top:100%;left:0;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow: var(--shadow);padding:8px;display:none;min-width:220px;z-index:100}
    .item:hover .submenu{display:block}
    .submenu a{display:block;padding:8px 10px;border-radius:8px;white-space:nowrap}
    .submenu a:hover{background:#f3f4f6}

    .search{display:flex;align-items:center;gap:8px;background:#f8fafc;border:1px solid var(--border);padding:10px 12px;border-radius:999px;flex:1;max-width:520px}
    .search input{border:0;background:transparent;outline:none;width:100%}
    .actions{display:flex;gap:8px;flex-shrink:0}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);padding:10px 14px;border-radius:999px;background:#fff;cursor:pointer;transition:.2s;touch-action:manipulation}
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .btn:active{transform:translateY(0)}
    .btn-solid{background:var(--ink);color:#fff;border-color:var(--ink)}
    .btn-wa{background:#25d366;border-color:#25d366;color:#073b1a}

    /* Hero */
    .hero{max-width:1200px;margin:22px auto;padding:0 14px;display:grid;grid-template-columns:1.15fr .85fr;gap:16px;align-items:center}
    .hero-card{background:linear-gradient(180deg,#ffffff,#f7fffb);border:1px solid var(--border);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow)}
    .hero h1{font-size:clamp(24px,5vw,40px);line-height:1.15;margin:0 0 10px}
    .hero p{color:var(--muted);margin:0 0 16px}
    .cta{display:flex;gap:10px;flex-wrap:wrap}

    /* Tabs */
    .tabs{max-width:1200px;margin:10px auto 0;padding:0 14px}
    .tablist{display:flex;gap:10px;flex-wrap:wrap}
    .tab{padding:10px 14px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer}
    .tab[aria-selected="true"]{background:var(--accent-2);border-color:#c7ead8}

    /* Grid productos */
    .grid{max-width:1200px;margin:18px auto;padding:0 14px;display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--border);border-radius:14px;overflow:hidden;box-shadow:0 2px 0 rgba(0,0,0,.03);display:flex;flex-direction:column}
    .card img{aspect-ratio:1/1;object-fit:cover}
    .card .p{padding:12px}
    .price{font-weight:700}
    .alt{color:var(--muted);font-size:13px}
    .add{margin:10px 12px 14px;padding:12px 14px;border:1px solid var(--border);border-radius:10px;background:#f8fafc;cursor:pointer}
    .add:hover{background:#eef2f7}

    /* Backdrop */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:.25s;z-index:60}
    .backdrop.show{opacity:1;pointer-events:auto}

    /* Canasta (drawer) */
    .drawer{position:fixed;inset:0 0 0 auto;width:min(460px,92vw);background:#fff;border-left:1px solid var(--border);box-shadow:-20px 0 40px rgba(0,0,0,.12);transform:translateX(100%);transition:.25s;z-index:70;display:flex;flex-direction:column}
    .drawer.open{transform:translateX(0)}
    .drawer header{position:sticky;top:0;border-bottom:1px solid var(--border);padding:14px 14px;font-weight:800;display:flex;align-items:center;justify-content:space-between;background:#fff}
    .drawer .content{padding:12px 14px;flex:1;overflow:auto}
    .line{display:flex;gap:10px;align-items:center;justify-content:space-between;border-bottom:1px dashed #e5e7eb;padding:10px 0}
    .qty{display:flex;align-items:center;gap:8px}
    .qty button{width:28px;height:28px;border:1px solid var(--border);border-radius:8px;background:#fff;cursor:pointer}
    .checkout{border-top:1px solid var(--border);padding:14px}
    .checkout form{display:grid;gap:10px}
    .note{font-size:13px;color:var(--muted)}

    /* Footer */
    footer{margin-top:30px;border-top:1px solid var(--border);background:#fff}
    .foot{max-width:1200px;margin:0 auto;padding:24px 14px;display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:700px){.foot{grid-template-columns:1fr}}

    /* ====== Newsletter ====== */
    .newsletter{max-width:1200px;margin:16px auto 0;padding:0 14px}
    .newsletter .newsletter-wrap{
      display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:center;
      background:var(--accent-2);border:1px solid #c7ead8;border-radius:var(--radius);
      padding:18px;box-shadow:var(--shadow)
    }
    .newsletter .text{display:flex;flex-direction:column;gap:4px}
    .newsletter .text strong{font-size:18px}
    .newsletter .sub{color:var(--muted);font-size:14px}
    .newsletter .controls{display:flex;gap:10px;align-items:center}
    .newsletter input[type="email"]{
      flex:1;padding:12px 14px;border:1px solid var(--border);
      border-radius:999px;outline:none
    }
    .newsletter .mini{font-size:12px;color:var(--muted);margin:8px 2px 0}
    .newsletter .ok{color:#065f46;margin-top:8px}
    .newsletter .err{color:#b91c1c;margin-top:8px}
    .newsletter .hidden{display:none}
    @media (max-width:900px){
      .hero{grid-template-columns:1fr}
      .brand img{height:40px}
    }
    @media (max-width:800px){
      .nav{flex-wrap:wrap}
      .menu{order:3; width:100%; overflow:auto; padding-bottom:4px}
      .search{order:2; width:100%}
      .actions{order:1}
      .newsletter .newsletter-wrap{grid-template-columns:1fr;gap:10px}
      .newsletter .controls{flex-direction:column;align-items:stretch}
      .btn, .btn-solid{justify-content:center}
    }
    @media (max-width:400px){
      .tab{flex:1;text-align:center}
    }
  </style>
</head>
<body>
  <div class="topbar">EnvÃ­os por Correos de Costa Rica Â· Entregas en la GAM por Uber Flash Â· Pago por transferencia o <strong>SINPE MÃ³vil</strong></div>

  <header>
    <nav class="nav">
      <div class="brand">
        <img src="img/greenskin-logo.png" alt="Logo GreenSkin" />
        <a href="#">GreenSkin</a>
      </div>

      <div class="search" role="search">
        <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24"><path fill="#6b7280" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5M9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14"/></svg>
        <input id="q" type="search" placeholder="Buscar: Perfume Bath & Body Works Costa Ricaâ€¦" aria-label="Buscar productos" />
      </div>

      <div class="menu" aria-label="CategorÃ­as">
        <div class="item">
          <a href="#" data-tab="skincare">Skin Care â–¾</a>
          <div class="submenu">
            <a href="#" data-tab="skincare" data-query="Limpiador|Cleanser">Limpiadores Faciales</a>
            <a href="#" data-tab="skincare" data-query="Toner|TÃ³nico|Heartleaf">TÃ³nicos</a>
            <a href="#" data-tab="skincare" data-query="Serum|Ampolla|Ampoule|Essence">Serums</a>
            <a href="#" data-tab="skincare" data-query="Crema|Cream|Moisturizer">Cremas Faciales</a>
            <a href="#" data-tab="skincare" data-query="Protector|Sunscreen|SPF">Protector Solar</a>
            <a href="#" data-tab="skincare" data-query="Exfoliante|Peeling|AHA|BHA">Exfoliantes</a>
            <a href="#" data-tab="skincare" data-query="Tratamiento|Spot|Mascarilla|Mask">Tratamientos</a>
          </div>
        </div>
        <div class="item">
          <a href="#" class="active" data-tab="perfumes">Perfumes â–¾</a>
          <div class="submenu">
            <a href="#" data-tab="perfumes" data-query="Splash|Mist">Splashes</a>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-wa" onclick="window.open('https://wa.me/50686434830','_blank')">WhatsApp</button>
        <button id="openBag" class="btn btn-solid bag-btn" title="Canasta" aria-label="Abrir canasta">ðŸ§º <span id="bagCount" style="display:none; margin-left:6px; background:#ef4444; color:#fff; border-radius:999px; padding:2px 6px; font-size:12px;">0</span></button>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-card">
      <h1>Perfumes Originales Bath & Body Works en Costa Rica. Â¡ElegÃ­ tu fragancia favorita!</h1>
      <p>Disponibles ahora: <strong>Gorgeous</strong>, <strong>Butterfly</strong> y <strong>Sweetest Song</strong>. Precio: <strong>â‚¡15.900</strong> c/u.</p>
      <div class="cta">
        <a href="#grid" class="btn btn-solid">Ver fragancias disponibles</a>
        <a href="#grid" class="btn">AÃ±adir a la canasta</a>
      </div>
    </div>
    <img src="img/hero-perfumes.jpg" alt="Perfumes Bath & Body Works en Costa Rica"
         loading="lazy" style="border-radius: var(--radius); border:1px solid var(--border); box-shadow: var(--shadow);" />
  </section>

  <!-- Newsletter (Netlify Forms) -->
  <section class="newsletter" id="suscripcion">
    <!-- IMPORTANTE: dejar este markup estÃ¡tico para que Netlify lo detecte -->
    <form name="newsletter" method="POST" netlify data-netlify="true" netlify-honeypot="bot-field" id="newsletterForm">
      <input type="hidden" name="form-name" value="newsletter" />
      <p class="hidden">
        <label>No llenar: <input name="bot-field" /></label>
      </p>
      <div class="newsletter-wrap">
        <div class="text">
          <strong>SuscrÃ­bete a GreenSkin</strong>
          <span class="sub">Recibe novedades y promos de Bath & Body Works.</span>
        </div>
        <div class="controls">
          <input type="email" name="email" required placeholder="Tu correo electrÃ³nico" aria-label="Correo electrÃ³nico" autocomplete="email" inputmode="email" />
          <button type="submit" class="btn btn-solid">Suscribirme</button>
        </div>
      </div>
      <p class="note mini">Al suscribirte aceptÃ¡s recibir correos de GreenSkin. PodÃ©s darte de baja cuando quieras.</p>
      <p id="nl-ok" class="ok" role="status" hidden>Â¡Listo! Te suscribimos con Ã©xito ðŸ’š</p>
      <p id="nl-err" class="err" role="status" hidden>Ups, no se pudo enviar. ProbÃ¡ de nuevo.</p>
    </form>
  </section>

  <!-- TABS VISUALES -->
  <section class="tabs" id="grid">
    <div class="tablist">
      <button class="tab" aria-selected="false" data-tab="skincare">Skin Care</button>
      <button class="tab" aria-selected="true" data-tab="perfumes">Perfumes</button>
    </div>
  </section>

  <!-- GRID DE PRODUCTOS -->
  <section class="grid" id="productGrid" aria-live="polite"></section>

  <!-- Backdrop y Canasta -->
  <div id="backdrop" class="backdrop" aria-hidden="true"></div>
  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Canasta de productos">
    <header>
      <span>Tu Canasta</span>
      <button id="closeBag" class="btn" style="padding:6px 10px;border-radius:10px;">âœ• Cerrar</button>
    </header>
    <div class="content">
      <div id="bagLines"></div>
    </div>
    <div class="checkout">
      <form id="orderForm">
        <strong>Datos para el pedido</strong>
        <input name="nombre" required placeholder="Nombre y apellidos" />
        <input name="telefono" required placeholder="TelÃ©fono / WhatsApp" />
        <input name="provincia" placeholder="Provincia, cantÃ³n, distrito" />
        <textarea name="direccion" rows="3" placeholder="DirecciÃ³n exacta / Instrucciones"></textarea>
        <label><input type="radio" name="pago" value="Transferencia bancaria" checked/> Transferencia bancaria</label>
        <label><input type="radio" name="pago" value="SINPE MÃ³vil"/> SINPE MÃ³vil</label>
        <p class="note">* No cobramos en el sitio. Te contactaremos para confirmar el pedido y coordinar el <strong>envÃ­o por Correos de Costa Rica</strong> o la <strong>entrega en la GAM por Uber Flash</strong>.</p>
        <button class="btn btn-solid" type="submit">Enviar pedido por correo</button>
        <button class="btn" type="button" id="shareWA">Compartir por WhatsApp</button>
      </form>
    </div>
  </aside>

  <footer>
    <div class="foot">
      <div>
        <strong>GreenSkin</strong><br/>
        WhatsApp: <a href="https://wa.me/50686434830" target="_blank">8643-4830</a><br/>
        Correo: <a href="mailto:dayaquesada.31@gmail.com">dayaquesada.31@gmail.com</a>
      </div>
      <div class="note">EnvÃ­os a todo Costa Rica por <strong>Correos de Costa Rica</strong>. Entregas en la <strong>GAM por Uber Flash</strong>. Pago por <strong>Transferencia o SINPE MÃ³vil</strong>.</div>
    </div>
  </footer>

<script>
/* ===== CatÃ¡logo (3 splashes actuales) ===== */
const CATALOG = [
  {id:'bbw-gorgeous', tab:'perfumes', brand:'Bath & Body Works', name:"Gorgeous (Splash)", price:15900, img:'img/bbw-gorgeous.jpg', alt:'Splash Bath & Body Works Gorgeous'},
  {id:'bbw-butterfly', tab:'perfumes', brand:'Bath & Body Works', name:"Butterfly (Splash)", price:15900, img:'img/bbw-butterfly.jpg', alt:'Splash Bath & Body Works Butterfly'},
  {id:'bbw-sweetest-song', tab:'perfumes', brand:'Bath & Body Works', name:"Sweetest Song (Splash)", price:15900, img:'img/bbw-sweetest-song.jpg', alt:'Splash Bath & Body Works Sweetest Song'}
];

const grid = document.getElementById('productGrid');
const tabs = document.querySelectorAll('.tab');
const searchInput = document.getElementById('q');
const drawer = document.getElementById('drawer');
const backdrop = document.getElementById('backdrop');
const openBagBtn = document.getElementById('openBag');
const closeBagBtn = document.getElementById('closeBag');
const bagCount = document.getElementById('bagCount');
const bagLines = document.getElementById('bagLines');
const orderForm = document.getElementById('orderForm');
const shareWA = document.getElementById('shareWA');

let currentTab = 'perfumes';  // Mostrar perfumes en portada
let bag = {}; // {id: qty}
let bagPushedToHistory = false;

function money(v){ return 'â‚¡'+v.toLocaleString('es-CR'); }

function render(){
  const q = searchInput.value.toLowerCase().trim();
  const data = CATALOG
    .filter(p => p.tab === currentTab && (!q || (p.name+' '+p.brand).toLowerCase().includes(q)));
  grid.innerHTML = data.map(p => `
    <article class="card" data-id="${p.id}">
      <img src="${p.img}" alt="${p.alt}" loading="lazy"/>
      <div class="p">
        <div class="alt">${p.brand}</div>
        <h3 style="margin:4px 0">${p.name}</h3>
        <div class="price">${money(p.price)}</div>
      </div>
      <button class="add" onclick="addToBag('${p.id}')">AÃ±adir a la canasta</button>
    </article>`).join('');
}

function addToBag(id){ bag[id] = (bag[id]||0)+1; updateBag(); }
function removeFromBag(id){ if(!bag[id]) return; bag[id]--; if(bag[id]<=0) delete bag[id]; updateBag(); }

function updateBag(){
  const entries = Object.entries(bag);
  const list = entries.map(([id,qty])=>{
    const p = CATALOG.find(x=>x.id===id);
    return `<div class="line">
      <div><strong>${p.name}</strong><div class="alt">${p.brand}</div></div>
      <div class="qty"><button onclick="removeFromBag('${id}')">-</button><span>${qty}</span><button onclick="addToBag('${id}')">+</button></div>
      <div>${money(p.price*qty)}</div>
    </div>`;
  }).join('');
  bagLines.innerHTML = list || '<p class="alt">Tu canasta estÃ¡ vacÃ­a.</p>';

  const total = entries.reduce((s,[id,qty])=>{const p=CATALOG.find(x=>x.id===id); return s+p.price*qty;},0);
  const count = entries.reduce((s,[_id,qty])=>s+qty,0);
  bagCount.style.display = count? 'inline-block':'none'; bagCount.textContent = count;

  localStorage.setItem('greenskin_bag', JSON.stringify(bag));

  const totalEl = document.getElementById('bagTotal');
  if(totalEl) totalEl.textContent = money(total);
  else {
    const t = document.createElement('p');
    t.id='bagTotal'; t.style.marginTop='8px';
    t.innerHTML = `<strong>Total: ${money(total)}</strong>`;
    document.querySelector('.checkout').prepend(t);
  }
}

/* ------- Abrir/Cerrar canasta con historial y backdrop ------- */
function openDrawer(){
  drawer.classList.add('open');
  backdrop.classList.add('show');
  drawer.setAttribute('aria-hidden','false');
  history.pushState({bag:true}, '', window.location.href);
  bagPushedToHistory = true;
}
function closeDrawer(useHistoryBack=true){
  drawer.classList.remove('open');
  backdrop.classList.remove('show');
  drawer.setAttribute('aria-hidden','true');
  if(useHistoryBack && bagPushedToHistory){
    bagPushedToHistory = false;
    if(history.state && history.state.bag) history.back();
  }
}

openBagBtn?.addEventListener('click', openDrawer);
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(false); });
backdrop.addEventListener('click', ()=>closeDrawer());
closeBagBtn?.addEventListener('click', ()=>closeDrawer());

/* AtrÃ¡s del navegador cierra la canasta si estÃ¡ abierta */
window.addEventListener('popstate', ()=>{
  if(drawer.classList.contains('open')){
    closeDrawer(false);
  }
});

/* Tabs visuales */
for(const t of tabs){
  t.addEventListener('click',()=>{
    tabs.forEach(x=>x.setAttribute('aria-selected','false'));
    t.setAttribute('aria-selected','true');
    currentTab = t.dataset.tab; render();
  });
}

/* MenÃº principal y submenÃºs (fijan tab y aplican bÃºsqueda por tipo) */
for(const a of document.querySelectorAll('.menu a')){
  a.addEventListener('click', (e)=>{
    e.preventDefault();
    const tab = a.dataset.tab;
    const qv  = a.dataset.query || '';
    if(tab){ currentTab = tab; }
    document.querySelectorAll('.menu > .item > a').forEach(x=>x.classList.remove('active'));
    const top = a.closest('.item')?.querySelector('a[data-tab]');
    if(top) top.classList.add('active');
    searchInput.value = qv;
    render();
  });
}

searchInput.addEventListener('input', render);

/* Persistencia canasta */
try{ const saved = localStorage.getItem('greenskin_bag'); if(saved) bag = JSON.parse(saved)||{}; }catch{}
render(); updateBag();

/* ===== EnvÃ­o de pedido por correo (sin backend) ===== */
orderForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const entries = Object.entries(bag);
  if(entries.length===0){ alert('Tu canasta estÃ¡ vacÃ­a. Agrega productos antes de enviar.'); return; }
  const form = new FormData(orderForm);
  const datos = {
    nombre: form.get('nombre'),
    telefono: form.get('telefono'),
    provincia: form.get('provincia')||'',
    direccion: form.get('direccion')||'',
    pago: form.get('pago')
  };
  const lines = entries.map(([id,qty])=>{
    const p=CATALOG.find(x=>x.id===id);
    return `- ${p.name} (${p.brand}) x${qty} â€” ${money(p.price*qty)}`
  }).join('%0A');
  const total = entries.reduce((s,[id,qty])=>{const p=CATALOG.find(x=>x.id===id); return s+p.price*qty;},0);
  const asunto = encodeURIComponent('Pedido GreenSkin (web)');
  const cuerpo = `Hola GreenSkin,%0A%0AQuiero realizar este pedido:%0A${lines}%0A%0ATotal: ${money(total)}%0A%0ADatos del cliente:%0ANombre: ${encodeURIComponent(datos.nombre)}%0ATelÃ©fono: ${encodeURIComponent(datos.telefono)}%0AProvincia/Ãrea: ${encodeURIComponent(datos.provincia)}%0ADirecciÃ³n: ${encodeURIComponent(datos.direccion)}%0AMÃ©todo de pago: ${encodeURIComponent(datos.pago)}%0A%0AEnvÃ­o por Correos de CR o entrega GAM por Uber Flash.`;
  window.location.href = `mailto:dayaquesada.31@gmail.com?subject=${asunto}&body=${cuerpo}`;
});

/* Compartir por WhatsApp */
shareWA.addEventListener('click', ()=>{
  const entries = Object.entries(bag);
  if(entries.length===0){ alert('Tu canasta estÃ¡ vacÃ­a.'); return; }
  const lines = entries.map(([id,qty])=>{
    const p=CATALOG.find(x=>x.id===id);
    return `â€¢ ${p.name} (${p.brand}) x${qty}`
  }).join('%0A');
  const total = entries.reduce((s,[id,qty])=>{const p=CATALOG.find(x=>x.id===id); return s+p.price*qty;},0);
  const msg = `Hola, vengo de la web GreenSkin.%0AQuiero este pedido:%0A${lines}%0ATotal aprox: ${money(total)}%0APago por Transferencia o SINPE MÃ³vil. Â¿Me ayudan a coordinar el envÃ­o?`;
  window.open(`https://wa.me/50686434830?text=${msg}`, '_blank');
});

/* ===== Newsletter (Netlify Forms) ===== */
const nlForm = document.getElementById('newsletterForm');
const nlOk = document.getElementById('nl-ok');
const nlErr = document.getElementById('nl-err');

if (nlForm) {
  nlForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    nlOk.hidden = true; nlErr.hidden = true;

    const formData = new FormData(nlForm);
    try {
      await fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams([...formData]).toString(),
      });
      nlForm.reset();
      nlOk.hidden = false;
    } catch (err) {
      nlErr.hidden = false;
    }
  });
}
</script>
</body>
</html>
